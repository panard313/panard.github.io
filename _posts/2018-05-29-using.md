---
layout: article
title: Common Note 简单记
key: 20180529
tags:
  - Common note
  - cx
lang: zh-Hans
---

# Android Phone

## termux

### ssh via adb
- pkg install openssh (need pkg upgrade first)
- sshd
- adb forward tcp:8022 tcp:8022
- ssh -p 8022 root@localhost  (maybe need passwd root first)

### termux sdcard permission
'''shell
termux-setup-storage
'''

### java dev
```shell
pkg install ecj dx
```

```java
public class Hello {
  public static void main(String[] args) {
    System.out.println("Hellod, on termux!");
  }
}
```
```shell
$ ecj Hello.java
$ dx --dex --output=Hello.dex Hello.class
$ dalvikvm -cp Hello.dex Hello
Hello world, on termux!
```

### c dev
>pkg install clang


## nexus 6p:

### [nexus 6p 时间同步](settings put global ntp_server time.asia.apple.com)

### [nexus 6p 去叹号](settings put global captive_portal_mode 0)

### mismatch vendor:
- [bootloop patch](https://forum.xda-developers.com/nexus-6p/general/nexus-6p-vendor-bootloader-radio-t3776039)

### lunch output:
```shell
  PLATFORM_VERSION_CODENAME=REL
  PLATFORM_VERSION=8.1.0
  TARGET_PRODUCT=aosp_angler
  TARGET_BUILD_VARIANT=userdebug
  TARGET_BUILD_TYPE=release
  TARGET_PLATFORM_VERSION=OPM1
  TARGET_BUILD_APPS=
  TARGET_ARCH=arm64
  TARGET_ARCH_VARIANT=armv8-a
  TARGET_CPU_VARIANT=cortex-a53
  TARGET_2ND_ARCH=arm
  TARGET_2ND_ARCH_VARIANT=armv7-a-neon
  TARGET_2ND_CPU_VARIANT=cortex-a53.a57
  HOST_ARCH=x86_64
  HOST_2ND_ARCH=x86
  HOST_OS=linux
  HOST_OS_EXTRA=Linux-4.4.0-127-generic-x86_64-with-Ubuntu-16.04-xenial
  HOST_CROSS_OS=windows
  HOST_CROSS_ARCH=x86
  HOST_CROSS_2ND_ARCH=x86_64
  HOST_BUILD_TYPE=release
  BUILD_ID=OPM3.171019.016
  OUT_DIR=out
  AUX_OS_VARIANT_LIST=
```




### tools:
- [android image tool: ](https://github.com/osm0sis/Android-Image-Kitchen.git)



## github pages
- [themes :  jekyll Text theme](https://github.com/kitian616/jekyll-TeXt-theme.git)


# vim skills

- 删除行尾空格
  :%s/\s\+$//g

- 删除空行
  :%s/^\s$/d

- 快速移动当前行位置

    - zt move the current line to the top of screen
    - zb move the current line to the bottom of screen
    - zz move the current line to the middle of screen


# Linux Cmd

### tmux 光标消失
  执行: tput cnorm

### cli tiips

- 处理带空格的文件名

  IFS=$'\n';for i in `ls`;do adb push $i /sdcar/Music/;done

### linux手动释放cache

- 1. 确认当前的drop_caches时候为默认值“0”
  more /proc/sys/vm/drop_caches 
  0

- 2.手动执行sync命令，确保系统的完整性，将所有未写的系统缓冲区写到磁盘中，包含已修改的i-node、已延迟的块I/O和读写映射文件
  sync

- 3.手动释放cache
  echo 3 > /proc/sys/vm/drop_caches

- 另：
- release pagecache
  echo 1 > /proc/sys/vm/drop_caches;

- release dentries and inodes
  echo 2 > /proc/sys/vm/drop_caches;

- relase pagecache, dentries and inodes
  echo 3 >/proc/sys/vm/drop_caches.


# Android

### 全部授权
```java
PackageManagerService.java
    private void grantPermissionsLPw(PackageParser.Package pkg, boolean replace,
        String packageOfInterest) {
            if (DEBUG_PERMISSIONS) {
                Slog.i(TAG, "Granting permission " + perm + " to package " + pkg.packageName);
            }

            // debug CX____, enable all permissions for all packages
            grant = GRANT_INSTALL;

            if (grant != GRANT_DENIED) {
            }
    }
```